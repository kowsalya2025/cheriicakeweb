{% extends 'main/base.html' %}
{% load static %}

{% block title %}Sweets{% endblock %}

{% block content %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Dancing+Script&display=swap" rel="stylesheet">

<style>
    .cake-card {
        transition: transform 0.3s ease;
        border-radius: 15px;
    }

    .cake-card img {
        height: 400px;
        object-fit: cover;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        display: block;
        text-decoration: none;
        color: inherit;
    }

    .cake-card:hover {
        transform: scale(1.03);
    }

    .wishlist-icon {
        position: absolute;
        top: 10px;
        right: 10px;
        background: white;
        border-radius: 50%;
        padding: 5px;
        cursor: pointer;
    }

    .card-body {
        background-color: rgb(235, 179, 97);
    }
  
</style>

<body>

<div class="container py-5">
    <h2 class="mb-4 text-center">Our Delicious Sweets</h2>
    <div class="row g-4">

        <!-- Product Cards -->
        {% comment %} Macaron {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/pas1.jpeg' %}" 
                     class="card-img-top product-link" 
                     alt="Macaron"
                     data-name="Macaron"
                     data-price="700"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/pas1.jpeg' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Macaron" data-price="700"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Macaron</h2>
                    <h5 class="card-text">From: ₹700 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %} Mant-Blanc {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/pas2.jpg' %}" 
                     class="card-img-top product-link" 
                     alt="Mant-Blanc"
                     data-name="Mant-Blanc"
                     data-price="700"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/pas2.jpg' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Mant-Blanc" data-price="700"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Mant-Blanc</h2>
                    <h5 class="card-text">From: ₹700 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %} Crepe {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/pas3.webp' %}" 
                     class="card-img-top product-link" 
                     alt="Crepe"
                     data-name="Crepe"
                     data-price="750"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/pas3.webp' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Crepe" data-price="750"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Crepe</h2>
                    <h5 class="card-text">From: ₹750 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %} Eclair {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/pas4.jpg' %}" 
                     class="card-img-top product-link" 
                     alt="Eclair"
                     data-name="Eclair"
                     data-price="750"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/pas4.jpg' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Eclair" data-price="750"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Eclair</h2>
                    <h5 class="card-text">From: ₹750 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %} Gateau {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/pas5.jpg' %}" 
                     class="card-img-top product-link" 
                     alt="Gateau"
                     data-name="Gateau"
                     data-price="650"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/pas5.jpg' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Gateau" data-price="650"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Gateau</h2>
                    <h5 class="card-text">From: ₹650 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %} Croissant {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/pas6.avif' %}" 
                     class="card-img-top product-link" 
                     alt="Croissant "
                     data-name="Croissant"
                     data-price="650"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/pas6.avif' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Croissant" data-price="650"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Croissant</h2>
                    <h5 class="card-text">From: ₹650 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %}  Fruit Cake {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/cakefurit.png' %}" 
                     class="card-img-top product-link" 
                     alt="Fruit Cake"
                     data-name="Fruit Cake"
                     data-price="1200"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/cakefurit.png' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Fruit Cake" data-price="1200"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Fruit Cake</h2>
                    <h5 class="card-text">From: ₹1200 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %} Cheese Cake{% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/cakepink.jpg' %}" 
                     class="card-img-top product-link" 
                     alt="Cheese Cake"
                     data-name="Cheese Cake"
                     data-price="950"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/cakepink.jpg' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Cheese Cake" data-price="950"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Cheese Cake</h2>
                    <h5 class="card-text">From: ₹950 PER KG</h5>
                </div>
            </div>
        </div>

        {% comment %} Coffee Cake {% endcomment %}
        <div class="col-md-4">
            <div class="card cake-card position-relative">
                <img src="{% static 'main/images/cakecoffe.png' %}" 
                     class="card-img-top product-link" 
                     alt="Coffee Cake "
                     data-name="Coffee Cake "
                     data-price="600"
                     data-description="This delectable treat is a heavenly
combination of rich, velvety chocolate
and a melt-in-your-mouth texture,
Whether you're a chocolate lover or
looking to satisfy your sweet tooth,
Choco Delight Cake is the perfect
choice."
                     data-image="{% static 'main/images/cakecoffe.png' %}">
                <i class="bi bi-heart wishlist-icon" data-name="Coffee Cake " data-price="600"></i>
                <div class="card-body text-center">
                    <h2 class="card-title">Coffee Cake </h2>
                    <h5 class="card-text">From: ₹600 PER KG</h5>
                </div>
            </div>
        </div>

    </div>
</div>

<section class="m-5 text-center">
    <img src="{% static 'main/images/design.png' %}" alt="" style="background-color: white; color: black;">
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
// ----- Wishlist Functionality -----
document.querySelectorAll('.wishlist-icon').forEach(icon => {
    icon.addEventListener('click', function(event) {
        event.stopPropagation();
        this.classList.toggle('active');

        const name = this.dataset.name;
        const price = this.dataset.price;
        const image = this.parentElement.querySelector('img').src;

        if (this.classList.contains('active')) {
            this.classList.replace('bi-heart', 'bi-heart-fill');
            addToWishlist(name, price, image);
        } else {
            this.classList.replace('bi-heart-fill', 'bi-heart');
            removeFromWishlist(name);
        }
    });
});

function addToWishlist(name, price, image) {
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    if (!wishlist.find(item => item.name === name)) {
        wishlist.push({ name, price, image });
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
    }
}

function removeFromWishlist(name) {
    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    wishlist = wishlist.filter(item => item.name !== name);
    localStorage.setItem('wishlist', JSON.stringify(wishlist));
}

// ----- Product Detail Navigation -----
document.querySelectorAll('.product-link').forEach(img => {
    img.addEventListener('click', function() {
        const name = encodeURIComponent(this.dataset.name);
        const price = encodeURIComponent(this.dataset.price);
        const image = encodeURIComponent(this.dataset.image);
        const description = encodeURIComponent(this.dataset.description);

        window.location.href = `/product_detail?name=${name}&price=${price}&image=${image}&description=${description}`;
    });
});
</script>

</body>
{% endblock %}