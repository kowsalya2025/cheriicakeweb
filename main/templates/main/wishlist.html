{% extends 'main/base.html' %} 

{% load static %}

{% block title %}Wishlist{% endblock %}

{% block content %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container py-5">
    <h2 class="mb-4 text-center">My Wishlist</h2>
    <div class="row g-4" id="wishlistContainer"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('wishlistContainer');

    function loadWishlist() {
        const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        container.innerHTML = ''; // Clear previous content

        if (wishlist.length === 0) {
            container.innerHTML = "<p class='text-center'>No items in wishlist.</p>";
            return;
        }

        wishlist.forEach((item, index) => {
            const div = document.createElement('div');
            div.classList.add('col-md-4', 'd-flex');
            div.innerHTML = `
                <div class="card wishlist-card h-100 flex-fill position-relative">
                    <img src="${item.image}" class="card-img-top" alt="${item.name}">
                    <div class="card-body text-center">
                        <h5 class="card-title">${item.name}</h5>
                        <p class="card-text">â‚¹${item.price}</p>
                        <button class="btn btn-danger btn-sm remove-btn" data-index="${index}">Remove</button>
                    </div>
                </div>
            `;
            container.appendChild(div);
        });

        // Add event listeners for remove buttons
        document.querySelectorAll('.remove-btn').forEach(button => {
            button.addEventListener('click', function() {
                const idx = this.getAttribute('data-index');
                removeFromWishlist(idx);
            });
        });
    }

    function removeFromWishlist(index) {
        const wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        wishlist.splice(index, 1); // Remove the item at the given index
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        loadWishlist(); // Reload wishlist
    }

    loadWishlist(); // Initial load
});
</script>

{% endblock %}

